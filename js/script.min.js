const popup=document.querySelector(".modal"),popupLink=document.querySelector(".popup-link"),popupClose=popup.querySelector(".modal-close"),nameInput=popup.querySelector(".input-name"),emailInput=popup.querySelector(".input-email"),messageInput=popup.querySelector(".input-message"),messageForm=popup.querySelector(".message-form");let isStorageSupport=!0,storageName="",storageEmail="";try{storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}popupLink.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("modal-show"),storageName?(nameInput.value=storageName,storageEmail?(emailInput.value=storageEmail,messageInput.focus()):emailInput.focus()):nameInput.focus()}),popupClose.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("modal-show"),popup.classList.remove("modal-error")}),messageForm.addEventListener("submit",function(e){nameInput.value&&emailInput.value?isStorageSupport&&(localStorage.setItem("name",nameInput.value),localStorage.setItem("email",emailInput.value)):(e.preventDefault(),popup.classList.remove("modal-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&popup.classList.contains("modal-show")&&(e.preventDefault(),popup.classList.remove("modal-show"),popup.classList.remove("modal-error"))});let pressButtons=document.querySelectorAll(".button-control"),sliders=document.querySelectorAll(".slide"),clickHandler=function(e,t){e.addEventListener("click",function(){for(let e=0;e<sliders.length;e++)sliders[e].classList.remove("current-slide"),pressButtons[e].classList.remove("current-control");t.classList.add("current-slide"),e.classList.add("current-control")})};for(let e=0;e<pressButtons.length;e++)clickHandler(pressButtons[e],sliders[e]);
